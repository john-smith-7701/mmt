package Tool::mmt::Controller::Matrix;
use Mojo::Base 'Tool::mmt::Controller::Menu';
use Encode qw/ decode decode_utf8 encode encode_utf8/;

 
sub menu{
     my $s = shift;
     my $data = $s->menu_get();
     $s->stash(_data=> $data);
     $s->render('menu/menu');
}
sub menu_get{
     my $s = shift;
     my $menu = $s->param('menu') || 'START';
     my $sql = "select m.SEQ_NO,m.No,m.名称 as meisyo,m.メニュー区分 as menukbn,a.URL,a.PARAM from menu_config m left join menu_item a on a.ID = m.menu_ID 
                where m.ID = ? order by m.No";
     my $dbh = $s->app->model->webdb->dbh;
     my $data = $dbh->selectall_arrayref($sql,+{Slice => +{}},$menu);
     return $data;
}
sub make_css{
    my $s = shift;
    my $css = <<EndCss;
        <style>/*<![CDATA[*/

h1 {
        color:white;
        background-color:black;
}
.fixed00{
      position: sticky;
      top: 0;
      left: 10;
}
.fixed01,
.fixed02,
.fixed03{
      position: sticky;
      top: 50;
      left: 170;
}
.fixed01{
      z-index: 2;
      color: #fff;
      background: #747474;
}
.fixed02{
      z-index: 1;
      color: #fff;
      background: #747474;
}
.fixed04{
      position: sticky;
      top: 50;
      left: 10;
}
.fixed91,
.fixed92{
      position: sticky;
      bottom: 0;
      left: 170;
}
.fixed91{
      z-index: 2;
      color: #fff;
      background: #747474;
}
.fixed92{
      z-index: 1;
      color: #fff;
      background: #747474;
}
  /*]]>*/
        </style>

EndCss
}
1;
